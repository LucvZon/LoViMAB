---
title: "LoViMAB Workflow Summary"
---

# Summary

This report is based on results generated with the LoViMAB v1.0.0 pipeline. WORK IN PROGRESS!!!

## Run Time and Resource Usage

This table shows the average resource usage for key processes across all samples.

```{r}
#| label: tbl-benchmark
#| echo: false
#| results: asis

types <- c("primary", "secondary", "final")

for (t in types) {
  filename <- paste0(t, "_benchmark_summary.csv")
  
  if (file.exists(filename)) {
    # Print a sub-header for the type (e.g. "Primary")
    cat(paste0("\n### ", tools::toTitleCase(t), " {style='text-align: left;'}\n\n"))
    
    # Read and print the table
    data <- read.csv(filename, check.names = FALSE)
    print(
      knitr::kable(data, format = "html", table.attr = 'class="table table-striped table-hover" style="font-size:15px;"')
    )
    cat("\n\n")
  }
}
```

# Assembly stats

This section presents the average assembly statistics for each tool across all detected viruses of interest. A higher mapping percentage and larger contigs are generally better.

```{r}
#| label: tbl-assembly
#| echo: false
#| results: asis

for (t in types) {
  filename <- paste0(t, "_assembly_summary.csv")
  
  if (file.exists(filename)) {
    cat(paste0("\n### ", tools::toTitleCase(t), " {style='text-align: left;'}\n\n"))
    data <- read.csv(filename, check.names = FALSE)
    print(
      knitr::kable(data, format = "html", table.attr = 'class="table table-striped table-hover" style="font-size:15px;"')
    )
    cat("\n\n")
  }
}
```

# Contig Quality (CheckV)

These tables summarize the total contig counts categorized by CheckV quality scores across all samples. 

## CheckV Quality Categories

```{r}
#| label: tbl-checkv-global
#| echo: false
#| results: asis

for (t in types) {
  filename <- paste0(t, "_checkv_global_summary.csv")
  
  if (file.exists(filename)) {
    cat(paste0("\n### ", tools::toTitleCase(t), " {style='text-align: left;'}\n\n"))
    data <- read.csv(filename, check.names = FALSE)
    print(
      knitr::kable(data, format = "html", table.attr = 'class="table table-striped table-hover" style="font-size:15px;"')
    )
    cat("\n\n")
  }
}
```

## MIUViG Quality Categories

```{r}
#| label: tbl-miuvig-global
#| echo: false
#| results: asis

for (t in types) {
  filename <- paste0(t, "_miuvig_global_summary.csv")
  
  if (file.exists(filename)) {
    cat(paste0("\n### ", tools::toTitleCase(t), " {style='text-align: left;'}\n\n"))
    data <- read.csv(filename, check.names = FALSE)
    print(
      knitr::kable(data, format = "html", table.attr = 'class="table table-striped table-hover" style="font-size:15px;"')
    )
    cat("\n\n")
  }
}
```
